MXE-Docker/mxe/
========

mxe-base (ベースイメージ) に MXE を加えたイメージを作る


使い方
--------

MXEを載せたDockerイメージを作成し、コンテナ(仮想マシン)を起動、終了するまでの使い方。
「0.準備」以外は全てここのディレクトリで作業する。


### 0. 準備：ベース・イメージの作成

[../mxe-base/](../mxe-base/README.md) 等でベース・イメージを作る。


### 1. イメージの作成

MXEを載せ、自分のユーザー設定を行ったイメージを作成する。

```
> git clone [MXE gitリポジトリURL] ~/mxe/  !- 本パッケージとは別にMXEを~/mxe/に取得しておく
> sh build_image.sh
> docker images         !- "mxe:[自分のユーザー名]" のイメージがあれば成功
```

イメージの作成は1度だけで良い。MXEのバージョンを更新する場合には作り直す。


### 2. コンテナの起動

作成したイメージからコンテナを起動する。

```
> edit run_docker.sh  ! 設定ファイルや共有ディレクトリを設定
> sh run_docker.sh
```
成功すれば、ターミナルがコンテナ内に移動する。


### 3. コンテナ内の作業

コンテナには以下が設定されている。
エディターは用意していないので、自分でインストールするなりする。

  * Debian linux
  * Python3, Pythonの各種ライブラリ, Cartopy地理データ
  * gfortran, MPI, fortranライブラリ
  * git, make
  * MXE パッケージ
  * ユーザー設定 (uid, gidなど)


### 4. コンテナの終了

作業が終われば以下のコマンドでコンテナを終了する。
作業したファイルは、共有ディレクトリ以外は全て消えることに注意。

```
(コンテナ内)> exit
(外)> docker stop mxe-[ユーザー名]
```


ツール
--------

  * build_image.sh        - 自分のユーザー設定を行った mxe イメージを作る
  * run_docker.sh         - MXE Dockerイメージからコンテナを起動する
  * login.sh              - 稼働中のMXEコンテナにログインする
  * save_image.sh         - 作成したイメージをファイルに保存する
